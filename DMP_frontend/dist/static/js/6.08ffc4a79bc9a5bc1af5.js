webpackJsonp([6],{"93W+":function(t,e){},LMOa:function(t,e){},lK0L:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{visible:t.dialogVisible,width:"100%"},on:{close:function(e){t.dialogVisible=!1,t.setShowLinkVs()}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("查看绑定数据")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogVisible=!1,t.setShowLinkVs()}}},[t._v("返回")])],1),t._v(" "),"requirement"===t.type?a("div",[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"#",type:"index",width:"50",align:"align"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题",prop:"title",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"用例类型",prop:"type"}}),t._v(" "),a("el-table-column",{attrs:{label:"用例等级",prop:"level"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},["高"===e.row.level?a("el-tag",{attrs:{effect:"dark",type:"danger",size:"small"}},[t._v(t._s(e.row.level))]):"中"===e.row.level?a("el-tag",{attrs:{effect:"dark",type:"success",size:"small"}},[t._v(t._s(e.row.level))]):a("el-tag",{attrs:{effect:"dark",type:"info",size:"small"}},[t._v(t._s(e.row.level))])],1)}}],null,!1,1663379825)}),t._v(" "),a("el-table-column",{attrs:{label:"用例状态",prop:"state"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建人",prop:"creator"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}})],1)],1):t._e(),t._v(" "),"testCase"===t.type?a("div",[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"#",type:"index",width:"50",align:"align"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题",prop:"title",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"优先级",prop:"priority"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},["紧急"===e.row.priority?a("el-tag",{attrs:{effect:"dark",type:"danger",size:"small"}},[t._v(t._s(e.row.priority))]):"高"===e.row.priority?a("el-tag",{attrs:{effect:"dark",type:"warning",size:"small"}},[t._v(t._s(e.row.priority))]):"中"===e.row.priority?a("el-tag",{attrs:{effect:"dark",type:"success",size:"small"}},[t._v(t._s(e.row.priority))]):a("el-tag",{attrs:{effect:"dark",type:"info",size:"small"}},[t._v(t._s(e.row.priority))])],1)}}],null,!1,1461215397)}),t._v(" "),a("el-table-column",{attrs:{label:"严重程度",prop:"importance"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},["致命"===e.row.importance?a("el-tag",{attrs:{effect:"dark",type:"danger",size:"small"}},[t._v(t._s(e.row.importance))]):"严重"===e.row.importance?a("el-tag",{attrs:{effect:"dark",type:"warning",size:"small"}},[t._v(t._s(e.row.importance))]):"一般"===e.row.importance?a("el-tag",{attrs:{effect:"dark",type:"success",size:"small"}},[t._v(t._s(e.row.importance))]):a("el-tag",{attrs:{effect:"dark",type:"info",size:"small"}},[t._v(t._s(e.row.importance))])],1)}}],null,!1,934285753)}),t._v(" "),a("el-table-column",{attrs:{label:"迭代",prop:"iteration"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"state"}}),t._v(" "),a("el-table-column",{attrs:{label:"处理人",prop:"handler"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建人",prop:"creator"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}})],1)],1):t._e()])],1)},staticRenderFns:[]};var i=a("VU/8")({props:["vs","type","searchId"],data:function(){return{dialogVisible:!1,tableData:[]}},watch:{vs:function(t){t&&(this.dialogVisible=t)},searchId:function(t){t&&this.setTableData(t)}},methods:{setTableData:function(t){var e=this;"requirement"===this.type?this.$axios.get("api/project/testcase/info/",{params:{linkId:t}}).then(function(t){var a=t.data;"000000"===a.respCode?e.tableData=a.list:e.$message.error(a.respMsg)}):this.$axios.get("api/project/defect/info/",{params:{linkId:t}}).then(function(t){var a=t.data;"000000"===a.respCode?e.tableData=a.list:e.$message.error(a.respMsg)})},setShowLinkVs:function(){this.$emit("getShowLinkVs",!1)}}},r,!1,function(t){a("LMOa")},"data-v-158d3188",null);e.a=i.exports},mCHd:function(t,e){},yYA3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("woOf"),i=a.n(r),s=a("Xxa5"),l=a.n(s),o=a("exGp"),n=a.n(o),c={props:["vs","ea","editForm"],data:function(){return{dialogVisible:!1,pid:"",form:{title:"",priority:"",iteration:"",state:"",handler:"",start:"",end:"",desc:""},defaultFrom:{title:"",priority:"",iteration:"",state:"",handler:"",start:"",end:"",desc:""},iterationOption:[],priorityOption:[{value:"紧急",label:"紧急"},{value:"高",label:"高"},{value:"中",label:"中"},{value:"低",label:"低"}]}},watch:{vs:function(t){t&&(this.dialogVisible=t)},editForm:function(t){t!==[]&&(this.form=t[0])}},mounted:function(){this.getIterationData()},methods:{setVs:function(){this.$emit("getVs",!1)},getIterationData:function(){var t=this;return n()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setPid();case 2:a=e.sent,t.$axios.get("api/project/iteration/info/",{params:{pid:a}}).then(function(e){var a=e.data;"000000"===a.respCode?t.iterationOption=a.list:t.$message.error(a.respMsg)});case 4:case"end":return e.stop()}},e,t)}))()},resetFrom:function(){this.form=i()({},this.form,this.defaultFrom)},setPid:function(){var t=this;return n()(l.a.mark(function e(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",sessionStorage.getItem("pid"));case 1:case"end":return t.stop()}},e,t)}))()},createRequirement:function(){var t=this;return n()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setPid();case 2:a=e.sent,t.$axios.post("api/project/requirement/add/",{form:t.form,pid:a}).then(function(e){var a=e.data;"000000"===a.respCode?(t.$message.success("新增成功"),t.$emit("fresh",!0),t.resetFrom()):t.$message.error(a.respMsg)});case 4:case"end":return e.stop()}},e,t)}))()},editRequirement:function(t){var e=this;this.$axios.post("api/project/requirement/edit/",{form:this.form,rid:t}).then(function(t){var a=t.data;"000000"===a.respCode?(e.$message.success("修改成功"),e.$emit("fresh",!0),e.resetFrom()):e.$message.error(a.respMsg)})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{visible:t.dialogVisible,width:"80%"},on:{close:function(e){t.dialogVisible=!1,t.setVs()}}},[a("div",{attrs:{slot:"title"},slot:"title"},["add"===t.ea?a("span",[t._v("创建工作项")]):"edit"===t.ea?a("span",[t._v("修改工作项")]):t._e(),t._v(" "),a("el-divider",{staticStyle:{margin:"24px 0 0 0"}})],1),t._v(" "),a("el-form",{model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:16}},[a("div",[a("div",[a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-input",{staticClass:"title_input",attrs:{size:"small",placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),a("div",[a("el-divider",{staticClass:"title_divider"})],1),t._v(" "),a("div",[a("el-form-item",[a("el-input",{staticClass:"desc_input",attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1)])]),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("div",[a("div",[a("el-form-item",{attrs:{label:"迭代"}},[a("el-select",{staticClass:"right_input_width",attrs:{size:"small"},model:{value:t.form.iteration,callback:function(e){t.$set(t.form,"iteration",e)},expression:"form.iteration"}},t._l(t.iterationOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级"}},[a("el-select",{staticClass:"right_input_width",attrs:{size:"small"},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}},t._l(t.priorityOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"处理人"}},[a("el-input",{staticClass:"right_input_width",attrs:{size:"small"},model:{value:t.form.handler,callback:function(e){t.$set(t.form,"handler",e)},expression:"form.handler"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"预计开始"}},[a("el-date-picker",{staticClass:"right_input_width",attrs:{"value-format":"yyyy-MM-dd",type:"date",size:"small"},model:{value:t.form.start,callback:function(e){t.$set(t.form,"start",e)},expression:"form.start"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"预计结束"}},[a("el-date-picker",{staticClass:"right_input_width",attrs:{"value-format":"yyyy-MM-dd",type:"date",size:"small"},model:{value:t.form.end,callback:function(e){t.$set(t.form,"end",e)},expression:"form.end"}})],1)],1)])]),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-divider")],1),t._v(" "),"管理员"===t.$cookies.get("user_type")?a("el-col",{attrs:{span:24}},["add"===this.ea?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogVisible=!1,t.createRequirement(),t.setVs()}}},[t._v("创建")]):"edit"===this.ea?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogVisible=!1,t.editRequirement(t.form.id),t.setVs()}}},[t._v("修改")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1,t.setVs(),t.resetFrom()}}},[t._v("取消")])],1):t._e()],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(c,d,!1,function(t){a("93W+")},"data-v-d18f115a",null).exports,u={components:{ShowLinkData:a("lK0L").a,RequirementAdd:p},data:function(){return{tableData:[],dialogVisible:!1,showLinkVisible:!1,pid:"",searchId:"",editOrAdd:"",editForm:[],stateSelectValue:"",stateOption:[{value:"未开始",label:"未开始"},{value:"进行中",label:"进行中"},{value:"已完成",label:"已完成"},{value:"已延期",label:"已延期"}]}},created:function(){this.pid=sessionStorage.getItem("pid"),this.getRequirementInfo(this.pid)},methods:{getVs:function(t){this.dialogVisible=t},getShowLinkVs:function(t){this.showLinkVisible=t},fresh:function(t){t&&this.getRequirementInfo(this.pid)},getRequirementInfo:function(t){var e=this;this.$axios.get("api/project/requirement/info/",{params:{pid:t}}).then(function(t){var a=t.data;"000000"===a.respCode?e.tableData=a.list:e.$message.error(a.respMsg)})},getEditRequirementForm:function(t){var e=this;this.$axios.get("api/project/requirement/info/",{params:{rid:t}}).then(function(t){var a=t.data;"000000"===a.respCode?e.editForm=a.list:e.$message.error(a.respMsg)})},delRequirement:function(t){var e=this;this.$axios.get("api/project/requirement/del/",{params:{rid:t}}).then(function(t){var a=t.data;"000000"===a.respCode?(e.$message.success("删除成功"),e.getRequirementInfo(e.pid)):e.$message.error(a.respMsg)})},stateChange:function(t,e){var a=this;this.$axios.post("api/project/requirement/updateState/",{rid:t,newState:e}).then(function(t){var e=t.data;"000000"===e.respCode?a.getRequirementInfo(a.pid):a.$message.error(e.respMsg)})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.dialogVisible=!0,t.editOrAdd="add"}}},[t._v("\n      创建需求\n    ")]),t._v(" "),a("el-dropdown",[a("el-button",{attrs:{type:"primary",plain:"",size:"small"}},[t._v("更多操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"el-icon-upload2"}},[t._v("导入需求")]),t._v(" "),a("el-dropdown-item",{attrs:{icon:"el-icon-download"}},[t._v("导出需求")]),t._v(" "),a("el-dropdown-item",{attrs:{icon:"el-icon-link"}},[t._v("关联用例")])],1)],1)],1),t._v(" "),a("div",[a("el-card",[a("el-table",{staticStyle:{width:"100%","min-height":"65vh"},attrs:{data:t.tableData,"max-height":"70vh"}},[a("el-table-column",{attrs:{label:"#",type:"index",width:"80",align:"align"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"优先级",prop:"priority"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},["紧急"===e.row.priority?a("el-tag",{attrs:{effect:"dark",type:"danger",size:"small"}},[t._v(t._s(e.row.priority))]):"高"===e.row.priority?a("el-tag",{attrs:{effect:"dark",type:"warning",size:"small"}},[t._v(t._s(e.row.priority))]):"中"===e.row.priority?a("el-tag",{attrs:{effect:"dark",type:"success",size:"small"}},[t._v(t._s(e.row.priority))]):a("el-tag",{attrs:{effect:"dark",type:"info",size:"small"}},[t._v(t._s(e.row.priority))])],1)}}])}),t._v(" "),a("el-table-column",{attrs:{label:"迭代",prop:"iteration"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return t.stateChange(e.row.id,e.row.state)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}},t._l(t.stateOption,function(t){return a("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}),1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"处理人",prop:"handler"}}),t._v(" "),a("el-table-column",{attrs:{label:"预计开始",prop:"start"}}),t._v(" "),a("el-table-column",{attrs:{label:"预计结束",prop:"end"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){t.dialogVisible=!0,t.editOrAdd="edit",t.getEditRequirementForm(e.row.id)}}},[t._v("详情")]),t._v(" "),"管理员"===t.$cookies.get("user_type")?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return t.delRequirement(e.row.id)}}},[t._v("删除")]):t._e(),t._v(" "),"管理员"===t.$cookies.get("user_type")?a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{size:"small",type:"primary"},on:{click:function(a){t.showLinkVisible=!0,t.searchId=e.row.id}}},[t._v("查看绑定的用例")]):t._e()],1)}}])})],1)],1)],1),t._v(" "),a("RequirementAdd",{attrs:{vs:t.dialogVisible,ea:t.editOrAdd,editForm:t.editForm},on:{getVs:t.getVs,fresh:t.fresh}}),t._v(" "),a("ShowLinkData",{attrs:{vs:t.showLinkVisible,type:"requirement",searchId:t.searchId},on:{getShowLinkVs:t.getShowLinkVs}})],1)},staticRenderFns:[]};var f=a("VU/8")(u,m,!1,function(t){a("mCHd")},"data-v-2a90c774",null);e.default=f.exports}});